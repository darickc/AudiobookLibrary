{"version":3,"sources":["./src/app/app.component.html","./src/app/home/home.component.html","./src/$_lazy_route_resource lazy namespace object","./src/app/app.component.css","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/home/home.component.ts","./src/app/shared/library.service.ts","./src/app/shared/update-notification.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["export default \"<body>\\r\\n  <div class=\\\"container\\\">\\r\\n    <router-outlet></router-outlet>\\r\\n  </div>\\r\\n</body>\\r\\n\"","export default \"<div *ngIf=\\\"loading\\\">\\r\\n  <mat-spinner></mat-spinner>\\r\\n</div>\\r\\n<div *ngIf=\\\"!loading\\\">\\r\\n  <div *ngIf=\\\"updateNotification.complete\\\">\\r\\n    <a [routerLink]=\\\"\\\" (click)=\\\"refreshData()\\\">Refresh</a>\\r\\n  </div>\\r\\n  <div *ngIf=\\\"!updateNotification.complete\\\">\\r\\n    <mat-progress-bar mode=\\\"determinate\\\" [value]=\\\"updateNotification.percent\\\"></mat-progress-bar>\\r\\n    <div>\\r\\n      {{updateNotification.filesComplete}} out of {{updateNotification.count}}\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <form [formGroup]=\\\"form\\\" novalidate>\\r\\n    <table class=\\\"table\\\">\\r\\n      <thead>\\r\\n        <tr>\\r\\n          <th>\\r\\n            <input type=\\\"checkbox\\\" [checked]=\\\"allSelected\\\" />\\r\\n          </th>\\r\\n          <th></th>\\r\\n          <th>\\r\\n            <mat-form-field class=\\\"example-full-width\\\">\\r\\n              <input matInput type=\\\"text\\\" placeholder=\\\"Author\\\" formControlName=\\\"author\\\" />\\r\\n            </mat-form-field>\\r\\n          </th>\\r\\n          <th>\\r\\n            <mat-form-field class=\\\"example-full-width\\\">\\r\\n              <input matInput type=\\\"text\\\" placeholder=\\\"Title\\\" formControlName=\\\"title\\\" />\\r\\n            </mat-form-field>\\r\\n          </th>\\r\\n          <th>\\r\\n            <mat-form-field class=\\\"example-full-width\\\">\\r\\n              <input matInput type=\\\"text\\\" placeholder=\\\"Album\\\" formControlName=\\\"album\\\" />\\r\\n            </mat-form-field>\\r\\n          </th>\\r\\n          <th>Disc</th>\\r\\n          <th>Track</th>\\r\\n          <th></th></tr>\\r\\n      </thead>\\r\\n      <tbody>\\r\\n        <tr *ngFor=\\\"let audiobook of filteredAudiobooks\\\">\\r\\n          <td></td>\\r\\n          <td>\\r\\n            <img [src]=\\\"audiobook.image\\\" *ngIf=\\\"audiobook.image\\\" />\\r\\n          </td>\\r\\n          <td><a [routerLink]=\\\"\\\" (click)=\\\"filterBy('author', audiobook.author)\\\">{{audiobook.author}}</a></td>\\r\\n          <td><a [routerLink]=\\\"\\\" (click)=\\\"filterBy('title', audiobook.title)\\\">{{audiobook.title}}</a></td>\\r\\n          <td><a [routerLink]=\\\"\\\" (click)=\\\"filterBy('album', audiobook.album)\\\">{{audiobook.album}}</a></td>\\r\\n          <td>{{audiobook.disc}}</td>\\r\\n          <td>{{audiobook.track}}</td>\\r\\n          <td>{{audiobook.filename}}</td>\\r\\n        </tr>\\r\\n      </tbody>\\r\\n    </table>\\r\\n  </form>\\r\\n</div>\\r\\n\"","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","export default \"@media (max-width: 767px) {\\r\\n  /* On small screens, the nav menu spans the full width of the screen. Leave a space for it. */\\r\\n  .body-content {\\r\\n    padding-top: 50px;\\r\\n  }\\r\\n}\\r\\n\\r\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYXBwLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSw2RkFBNkY7RUFDN0Y7SUFDRSxpQkFBaUI7RUFDbkI7QUFDRiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiQG1lZGlhIChtYXgtd2lkdGg6IDc2N3B4KSB7XHJcbiAgLyogT24gc21hbGwgc2NyZWVucywgdGhlIG5hdiBtZW51IHNwYW5zIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSBzY3JlZW4uIExlYXZlIGEgc3BhY2UgZm9yIGl0LiAqL1xyXG4gIC5ib2R5LWNvbnRlbnQge1xyXG4gICAgcGFkZGluZy10b3A6IDUwcHg7XHJcbiAgfVxyXG59XHJcbiJdfQ== */\"","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'app';\r\n}\r\n","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { LibraryService } from './shared/library.service';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\r\n\r\n@NgModule({\r\n  declarations: [AppComponent, HomeComponent],\r\n  imports: [\r\n    BrowserModule.withServerTransition({ appId: 'ng-cli-universal' }),\r\n    HttpClientModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatInputModule,\r\n    MatProgressSpinnerModule,\r\n    MatProgressBarModule,\r\n    RouterModule.forRoot([{ path: '', component: HomeComponent, pathMatch: 'full' }]),\r\n    BrowserAnimationsModule\r\n  ],\r\n  providers: [LibraryService],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {}\r\n","import { Component, Inject, OnInit, NgZone } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { FormGroup, FormBuilder } from '@angular/forms';\r\nimport { finalize, takeUntil, debounceTime } from 'rxjs/operators';\r\nimport * as _ from 'lodash';\r\nimport { LibraryService } from '../shared/library.service';\r\nimport { Book } from '../shared/book';\r\nimport { UpdateNotification } from '../shared/update-notification';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html'\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  loading: boolean;\r\n  audiobooks: Book[];\r\n  filteredAudiobooks: Book[];\r\n  form: FormGroup;\r\n  allSelected = false;\r\n  connected = false;\r\n  updateNotification: UpdateNotification;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    @Inject('BASE_URL') private baseUrl: string,\r\n    private _fb: FormBuilder,\r\n    private libraryService: LibraryService,\r\n    private _ngZone: NgZone\r\n  ) {\r\n    this.subscribeToEvents();\r\n    this.updateNotification = new UpdateNotification();\r\n    this.updateNotification.complete = true;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = this._fb.group({\r\n      author: [''],\r\n      album: [''],\r\n      title: ['']\r\n    });\r\n\r\n    this.form.valueChanges.pipe(debounceTime(500)).subscribe(() => {\r\n      this.filter();\r\n    });\r\n\r\n    // this.loadData();\r\n  }\r\n\r\n  private subscribeToEvents(): void {\r\n    this.libraryService.connectionEstablished.subscribe(connected => {\r\n      this.connected = connected;\r\n      if (this.connected) {\r\n        console.log('Getting books');\r\n        this.loadData();\r\n      }\r\n    });\r\n\r\n    this.libraryService.updateNotificationReceived.subscribe((update: UpdateNotification) => {\r\n      this._ngZone.run(() => {\r\n        this.updateNotification = update;\r\n      });\r\n    });\r\n  }\r\n\r\n  loadData() {\r\n    this.loading = true;\r\n    this.libraryService.getBooks().then(data => {\r\n      this.audiobooks = data;\r\n      this.filter();\r\n      this.loading = false;\r\n    });\r\n    // this.loading = true;\r\n    // this.http\r\n    //   .get<Book[]>(this.baseUrl + 'api/Audiobooks')\r\n    //   .pipe(\r\n    //     finalize(() => {\r\n    //       this.loading = false;\r\n    //     })\r\n    //   )\r\n    //   .subscribe(\r\n    //     result => {\r\n    //       this.audiobooks = result;\r\n    //       this.filter();\r\n    //     },\r\n    //     error => console.error(error)\r\n    //   );\r\n  }\r\n\r\n  refreshData() {\r\n    this.updateNotification.percent = 0;\r\n    this.updateNotification.complete = false;\r\n    this.libraryService.refreshLibrary();\r\n    // this.loading = true;\r\n    // this.http.post(this.baseUrl + 'api/Audiobooks/refresh', null).subscribe(\r\n    //   result => {\r\n    //     this.loading = false;\r\n    //   },\r\n    //   error => console.error(error)\r\n    // );\r\n  }\r\n\r\n  filter() {\r\n    const filterData = this.form.value;\r\n    const that = this;\r\n    this.filteredAudiobooks = _.filter(this.audiobooks, function(book) {\r\n      if (that.checkData(book.author, filterData.author) && that.checkData(book.title, filterData.title) && that.checkData(book.album, filterData.album)) {\r\n        return book;\r\n      }\r\n    });\r\n  }\r\n\r\n  checkData(arg1, arg2) {\r\n    if (!arg1) {\r\n      if (!arg2) {\r\n        return true;\r\n      }\r\n    } else {\r\n      return arg1.toLowerCase().includes(arg2.toLowerCase());\r\n    }\r\n  }\r\n\r\n  filterBy(field, value) {\r\n    this.form.controls[field].setValue(value);\r\n  }\r\n\r\n  selectAll() {}\r\n\r\n  select(book) {\r\n    // book.selected = true;\r\n  }\r\n}\r\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { HubConnection, HubConnectionBuilder } from '@aspnet/signalr';\nimport { Book } from './book';\nimport { UpdateNotification } from './update-notification';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LibraryService {\n  updateNotificationReceived = new EventEmitter<UpdateNotification>();\n  connectionEstablished = new EventEmitter<Boolean>();\n  private connectionIsEstablished = false;\n  private _hubConnection: HubConnection;\n\n  constructor() {\n    this.createConnection();\n    this.registerOnServerEvents();\n    this.startConnection();\n  }\n\n  private createConnection() {\n    this._hubConnection = new HubConnectionBuilder().withUrl('library').build();\n  }\n\n  private startConnection(): void {\n    this._hubConnection\n      .start()\n      .then(() => {\n        this.connectionIsEstablished = true;\n        console.log('Hub connection started');\n        this.connectionEstablished.emit(true);\n      })\n      .catch(err => {\n        console.log('Error while establishing connection, retrying...');\n        setTimeout(() => this.startConnection(), 5000);\n      });\n  }\n\n  private registerOnServerEvents(): void {\n    this._hubConnection.on('RefreshUpdate', (data: UpdateNotification) => {\n      console.log(data);\n      this.updateNotificationReceived.emit(data);\n    });\n    const that = this;\n    this._hubConnection.onclose(() => {\n      console.log('Hub connection lost');\n      that.connectionIsEstablished = false;\n      that.startConnection();\n    });\n  }\n\n  getBooks() {\n    return this._hubConnection.invoke('GetBooks');\n  }\n\n  refreshLibrary() {\n    return this._hubConnection.invoke('RefreshLibrary');\n  }\n}\n","export class UpdateNotification {\n  count: number;\n  filesComplete: number;\n  percent: number;\n  complete: boolean;\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * In development mode, to ignore zone related error stack frames such as\r\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\r\n * import the following file, but please comment it out in production mode\r\n * because it will have performance impact when throw error\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import 'hammerjs';\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nexport function getBaseUrl() {\r\n  return document.getElementsByTagName('base')[0].href;\r\n}\r\n\r\nconst providers = [\r\n  { provide: 'BASE_URL', useFactory: getBaseUrl, deps: [] }\r\n];\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic(providers).bootstrapModule(AppModule)\r\n  .catch(err => console.log(err));\r\n"],"sourceRoot":"webpack:///"}